---
title: Middleware Circuit Breaker
description: Circuit breaker middleware for resilient request handling
category: Middleware
sidebar:
  order: 42
---

import { Code, Aside, Steps, Tabs, TabItem } from '@astrojs/starlight/components';

**Category:** Middleware
**Navigation:** [API Reference](../) › [Middleware](../middleware)

Circuit breaker middleware for resilient request handling.

## Import

```python
import logicpwn.core.middleware.circuit_breaker
# or
from logicpwn.core.middleware.circuit_breaker import *
```


## Quick Examples

### Basic Usage

```python
from logicpwn.core.exploit_engine import load_exploit_chain_from_file, run_exploit_chain
import requests

# Load and execute a simple exploit chain
session = requests.Session()
chain = load_exploit_chain_from_file("examples/simple_exploit_corrected.yaml")
results = run_exploit_chain(session, chain)

# Analyze results
for result in results:
    print(f"Step: {result.step_name}")
    print(f"Status: {result.status}")
    print(f"Time: {result.execution_time:.2f}s")
```

### Real-World IDOR Testing

```python
from logicpwn.core.access import detect_idor_flaws
from logicpwn.core.auth import AuthConfig, authenticate_session

# Setup authentication
auth_config = AuthConfig(
    url="https://api.example.com/login",
    credentials={"username": "user", "password": "pass"},
    success_indicators=["access_token"]
)

session = authenticate_session(auth_config)

# Test for IDOR vulnerabilities
results = detect_idor_flaws(
    session,
    "https://api.example.com/users/{id}/profile",
    test_ids=["1", "2", "3", "admin", "999"],
    success_indicators=["user_data", "profile"],
    failure_indicators=["unauthorized", "403"]
)
```


## Classes

:::note[Available Classes]
This module provides 2 class(es) for middleware.
:::

### CircuitBreakerError

<Tabs>
<TabItem label="Overview">

```python
class CircuitBreakerError (RequestExecutionError):
    """
    Exception raised when circuit breaker is open
    """
```

Exception raised when circuit breaker is open.

</TabItem>
<TabItem label="Constructor">

```python
def __init__(self, /, *args, **kwargs)
```

Initialize a new instance of `CircuitBreakerError`.

</TabItem>
</Tabs>


---

### CircuitBreakerMiddleware

<Tabs>
<TabItem label="Overview">

```python
class CircuitBreakerMiddleware (BaseMiddleware):
    """
    Circuit breaker middleware for resilient request handling
    """
```

Circuit breaker middleware for resilient request handling.

</TabItem>
<TabItem label="Constructor">

```python
def __init__(self, failure_threshold: int = 5, recovery_timeout: int = 60, error_threshold: float = 0.5)
```

Initialize a new instance of `CircuitBreakerMiddleware`.

</TabItem>
</Tabs>

#### Methods

##### disable

:::note[Method]
Instance method
:::

```python
def disable(self)
```

Disable the middleware.

##### enable

:::note[Method]
Instance method
:::

```python
def enable(self)
```

Enable the middleware.

##### get_statistics

:::note[Method]
Instance method
:::

```python
def get_statistics(self) -> dict
```

Get circuit breaker statistics.

##### process_request

:::note[Method]
Instance method
:::

```python
def process_request(self, context: logicpwn.core.middleware.middleware.MiddlewareContext) -> logicpwn.core.middleware.middleware.MiddlewareContext
```

Check circuit breaker state before processing request.

##### process_response

:::note[Method]
Instance method
:::

```python
def process_response(self, context: logicpwn.core.middleware.middleware.MiddlewareContext, response: Any) -> Any
```

Update circuit breaker state based on response.

##### reset

:::note[Method]
Instance method
:::

```python
def reset(self)
```

Reset circuit breaker to initial state.


---


## Related Modules

:::tip[Middleware Modules]
Explore other modules in the Middleware category:

- **[Middleware](../middleware)** - Core middleware functionality
- **[Middleware › Middleware](../middleware/middleware)** - Main middleware implementation
:::
