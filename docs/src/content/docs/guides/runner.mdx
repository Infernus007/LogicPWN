---
title: HTTP Runner
description: Send HTTP requests with rate limiting, retries, and SSL controls
category: Guides
sidebar:
  order: 2
---

import { Card, CardGrid, Steps, TabItem, Tabs } from '@astrojs/starlight/components';

## Quick Start

The `HttpRunner` provides a unified interface for HTTP requests with built-in rate limiting, retries, and SSL controls.

```python
from logicpwn.core.runner import HttpRunner

# Basic usage
runner = HttpRunner()
result = runner.get("https://httpbin.org/get")
print(result.status_code)  # 200
```

## Async Usage

```python
import asyncio
from logicpwn.core.runner import HttpRunner

async def main():
    async with HttpRunner() as runner:
        result = await runner.get_async("https://httpbin.org/get")
        print(result.status_code)

asyncio.run(main())
```

## HTTP Methods

<Tabs>
<TabItem label="Sync">
```python
runner = HttpRunner()

# GET request
result = runner.get("https://httpbin.org/get")

# POST with JSON
result = runner.post("https://httpbin.org/post",
                    json_data={"key": "value"})

# PUT request
result = runner.put("https://httpbin.org/put",
                   data="content")

# DELETE request
result = runner.delete("https://httpbin.org/delete")
```
</TabItem>
<TabItem label="Async">
```python
async with HttpRunner() as runner:
    # GET request
    result = await runner.get_async("https://httpbin.org/get")

    # POST with JSON
    result = await runner.post_async("https://httpbin.org/post",
                                    json_data={"key": "value"})

    # PUT request
    result = await runner.put_async("https://httpbin.org/put",
                                   data="content")

    # DELETE request
    result = await runner.delete_async("https://httpbin.org/delete")
```
</TabItem>
</Tabs>

## Configuration

### Rate Limiting

```python
from logicpwn.core.runner import HttpRunner, RunnerConfig, RateLimitConfig, RateLimitAlgorithm

# Token bucket rate limiting
rate_limit = RateLimitConfig(
    algorithm=RateLimitAlgorithm.TOKEN_BUCKET,
    requests_per_second=2.0,
    burst_size=5
)

runner = HttpRunner(RunnerConfig(rate_limit=rate_limit))
```

### Retry Configuration

```python
from logicpwn.core.runner import HttpRunner, RunnerConfig, RetryConfig

# Configure retries
retry = RetryConfig(
    max_attempts=3,
    base_delay=1.0,
    exponential_base=2.0,
    retryable_status_codes={500, 502, 503, 504, 429}
)

runner = HttpRunner(RunnerConfig(retry=retry))
```

### SSL/TLS Settings

```python
from logicpwn.core.runner import HttpRunner, RunnerConfig, SSLConfig, SSLVerificationLevel

# Strict SSL verification
ssl = SSLConfig(
    verification_level=SSLVerificationLevel.STRICT,
    min_tls_version="TLSv1.3"
)

runner = HttpRunner(RunnerConfig(ssl=ssl))
```

## Batch Requests

```python
# Multiple requests at once
request_configs = [
    {"url": "https://httpbin.org/get", "method": "GET"},
    {"url": "https://httpbin.org/post", "method": "POST", "json_data": {"test": "data"}},
    {"url": "https://httpbin.org/put", "method": "PUT"}
]

results = runner.batch(request_configs)
for result in results:
    print(f"Status: {result.status_code}")
```

## Request Builder

```python
from logicpwn.core.runner import RequestBuilder

# Fluent request building
config = (RequestBuilder("https://httpbin.org/post")
    .post()
    .json_data({"message": "Hello"})
    .header("X-Trace", "demo")
    .timeout(30)
    .build())

result = runner.send_request(**config)
```

## Common Patterns

<CardGrid>
<Card title="Authentication" icon="key">
```python
# Use with authenticated session
from logicpwn.core.auth import authenticate_session, AuthConfig

# Authenticate first
auth_config = AuthConfig(
    url="https://target.com/login",
    method="POST",
    credentials={"username": "admin", "password": "password"}
)
session = authenticate_session(auth_config)

# Use with runner
runner = HttpRunner()
runner.session = session
result = runner.get("https://target.com/protected")
```
</Card>

<Card title="Error Handling" icon="warning">
```python
try:
    result = runner.get("https://httpbin.org/status/500")
    if result.status_code >= 400:
        print(f"HTTP Error: {result.status_code}")
except Exception as e:
    print(f"Request failed: {e}")
```
</Card>

<Card title="Streaming" icon="download">
```python
# Stream large responses
async with HttpRunner() as runner:
    total = 0
    async for chunk in runner.send_request_streaming("https://httpbin.org/bytes/10000"):
        total += len(chunk)
    print(f"Streamed: {total} bytes")
```
</Card>
</CardGrid>

## Best Practices

1. **Use context managers** for async operations
2. **Configure rate limiting** to avoid overwhelming servers
3. **Set appropriate timeouts** for your use case
4. **Handle errors gracefully** with try/catch blocks
5. **Use batch requests** for multiple operations
6. **Enable SSL verification** in production

## Troubleshooting

- **Import errors**: Set `PYTHONPATH` to project root
- **SSL warnings**: Expected when verification is disabled
- **Rate limiting**: Adjust `requests_per_second` if getting throttled
- **Timeouts**: Increase timeout values for slow networks
